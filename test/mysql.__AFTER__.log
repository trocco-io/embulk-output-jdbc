in:
  type: file
  path_prefix: test.jsonl
  parser:
    type: jsonl
    columns:
    - {name: test_boolean, type: boolean}
    - {name: test_long, type: long}
    - {name: test_double, type: double}
    - {name: test_string, type: string}
    - {name: test_timestamp, type: timestamp}
    - {name: test_json, type: json}
    - {name: test_json_text, type: json}
    - {name: test_json_string, type: json}
    - {name: test_json_nstring, type: json}
out:
  type: mysql
  mode: replace
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  schema: 
  table: test_table
  column_options:
    test_timestamp: {type: DATETIME}
    test_json_text: {type: TEXT}
    test_json_string: {type: 'TEXT', value_type: string}
    test_json_nstring: {type: 'TEXT', value_type: nstring}
  driver_path: null
  create_table_option: CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
  options: {characterEncoding: utf8}
2024-03-29 18:56:30.626 +0000: Embulk v0.9.26
2024-03-29 18:56:31.278 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-29 18:56:32.647 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-29 18:56:33.188 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-29 18:56:33.272 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-mysql (0.10.5)
2024-03-29 18:56:33.320 +0000 [INFO] (0001:transaction): Loaded plugin embulk-parser-jsonl (0.2.1)
2024-03-29 18:56:33.333 +0000 [INFO] (0001:transaction): Listing local files at directory '.' filtering filename by prefix 'test.jsonl'
2024-03-29 18:56:33.334 +0000 [INFO] (0001:transaction): "follow_symlinks" is set false. Note that symbolic links to directories are skipped.
2024-03-29 18:56:33.338 +0000 [INFO] (0001:transaction): Loading files [test.jsonl]
2024-03-29 18:56:33.359 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-29 18:56:33.379 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.381 +0000 [INFO] (0001:transaction): JDBC Driver = /home/ubuntu/.embulk/lib/gems/gems/embulk-output-mysql-0.10.5-java/default_jdbc_driver/mysql-connector-java-5.1.44.jar
2024-03-29 18:56:33.386 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.578 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.579 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )
2024-03-29 18:56:33.579 +0000 [WARN] (0001:transaction): This plugin will update MySQL Connector/J version in the near future release.
2024-03-29 18:56:33.579 +0000 [WARN] (0001:transaction): It has some incompatibility changes.
2024-03-29 18:56:33.579 +0000 [WARN] (0001:transaction): For example, the 5.1.35 introduced `noTimezoneConversionForDateType` and `cacheDefaultTimezone` options.
2024-03-29 18:56:33.579 +0000 [WARN] (0001:transaction): Please read a document and make sure configuration carefully before updating the plugin.
2024-03-29 18:56:33.580 +0000 [WARN] (0001:transaction): The plugin will set `useLegacyDatetimeCode=false` by default in future.
2024-03-29 18:56:33.580 +0000 [INFO] (0001:transaction): Using replace mode
2024-03-29 18:56:33.589 +0000 [INFO] (0001:transaction): SQL: CREATE TABLE `test_table_0000018e8b922134_embulk` (`test_boolean` BOOLEAN, `test_long` BIGINT, `test_double` DOUBLE PRECISION, `test_string` TEXT, `test_timestamp` DATETIME, `test_json` TEXT, `test_json_text` TEXT, `test_json_string` TEXT, `test_json_nstring` TEXT) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
2024-03-29 18:56:33.609 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-29 18:56:33.646 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-29 18:56:33.685 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.685 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.696 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.754 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.754 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:33.763 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.764 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.765 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.821 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.822 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:33.823 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.823 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.825 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.883 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.883 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:33.884 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.884 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.886 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.943 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.943 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:33.944 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.944 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:33.945 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:33.997 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:33.998 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:33.999 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:33.999 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:34.000 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:34.053 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:34.053 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:34.054 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:34.055 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:34.057 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:34.113 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:34.113 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:34.114 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:34.114 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:34.116 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:34.171 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-29 18:56:34.171 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e8b922134_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-29 18:56:34.225 +0000 [INFO] (0016:task-0000): Loading 6 rows
2024-03-29 18:56:34.239 +0000 [INFO] (0016:task-0000): > 0.01 seconds (loaded 6 rows in total)
2024-03-29 18:56:34.240 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-29 18:56:34.241 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=2700000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:34.301 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-29 18:56:34.301 +0000 [INFO] (0001:transaction): SQL: RENAME TABLE `test_table_0000018e8b922134_embulk` TO `0000018e8b9223fd_embulk_swap_tmp`, `test_table` TO `test_table_0000018e8b922134_embulk`, `0000018e8b9223fd_embulk_swap_tmp` TO `test_table`
2024-03-29 18:56:34.321 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-29 18:56:34.321 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e8b922134_embulk`
2024-03-29 18:56:34.331 +0000 [INFO] (0001:transaction): > 0.01 seconds
2024-03-29 18:56:34.337 +0000 [WARN] (0001:transaction): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:34.337 +0000 [WARN] (0001:transaction): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:34.339 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-29 18:56:34.394 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-29 18:56:34.394 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e8b922134_embulk`
2024-03-29 18:56:34.397 +0000 [INFO] (0001:transaction): > 0.00 seconds
2024-03-29 18:56:34.398 +0000 [INFO] (main): Committed.
2024-03-29 18:56:34.398 +0000 [INFO] (main): Next config diff: {"in":{"last_path":"test.jsonl"},"out":{}}
in:
  type: mysql
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  column_options:
    test_timestamp: {type: string, timestamp_format: '%Y-%m-%d %H:%M:%S.%6N %z'}
    test_json: {type: json}
    test_json_text: {type: json}
    test_json_string: {type: json}
    test_json_nstring: {type: json}
  query: SELECT * FROM `test_table`
  options: {characterEncoding: utf8}
out:
  type: command
  command: 'cat -'
  formatter:
    type: jsonl
2024-03-29 18:56:34.660 +0000: Embulk v0.9.26
2024-03-29 18:56:35.257 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-29 18:56:36.507 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-29 18:56:37.040 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-29 18:56:37.122 +0000 [INFO] (0001:transaction): Loaded plugin embulk-input-mysql (0.13.2)
2024-03-29 18:56:37.149 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-command (0.1.4)
2024-03-29 18:56:37.175 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:37.178 +0000 [INFO] (0001:transaction): The MySQL JDBC driver for the class "com.mysql.jdbc.Driver" is expected to be found in "default_jdbc_driver" at /home/ubuntu/.embulk/lib/gems/gems/embulk-input-mysql-0.13.2-java/default_jdbc_driver/mysql-connector-java-5.1.44.jar.
2024-03-29 18:56:37.182 +0000 [INFO] (0001:transaction): Fetch size is 10000. Using server-side prepared statement.
2024-03-29 18:56:37.182 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-29 18:56:37.365 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )
2024-03-29 18:56:37.365 +0000 [WARN] (0001:transaction): embulk-input-mysql 0.9.0 upgraded the bundled MySQL Connector/J version from 5.1.34 to 5.1.44 .
2024-03-29 18:56:37.365 +0000 [WARN] (0001:transaction): And set useLegacyDatetimeCode=false by default in order to get correct datetime value when the server timezone and the client timezone are different.
2024-03-29 18:56:37.365 +0000 [WARN] (0001:transaction): Set useLegacyDatetimeCode=true if you need to get datetime value same as older embulk-input-mysql.
2024-03-29 18:56:37.398 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-29 18:56:37.454 +0000 [INFO] (0001:transaction): Loaded plugin embulk-formatter-jsonl (0.1.4)
2024-03-29 18:56:37.482 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-29 18:56:37.491 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.501 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.505 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.509 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.512 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.516 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.521 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.525 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-29 18:56:37.543 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-29 18:56:37.543 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-29 18:56:37.573 +0000 [INFO] (0016:task-0000): Fetch size is 10000. Using server-side prepared statement.
2024-03-29 18:56:37.573 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-29 18:56:37.627 +0000 [INFO] (0016:task-0000): SQL: SELECT * FROM `test_table`
2024-03-29 18:56:37.632 +0000 [INFO] (0016:task-0000): > 0.00 seconds
{"test_boolean":true,"test_long":123,"test_double":1.23,"test_string":"あいうえお","test_timestamp":"1999-12-31 23:59:59.000000 +0000","test_json":{"キー":"値"},"test_json_text":{"キー":"値"},"test_json_string":{"キー":"値"},"test_json_nstring":{"キー":"値"}}
{"test_boolean":false,"test_long":456,"test_double":4.56,"test_string":"かきくけこ","test_timestamp":"2000-01-01 00:00:00.000000 +0000","test_json":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_text":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_string":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_nstring":[{"キー1":"値1"},{"キー2":"値2"}]}
{"test_boolean":null,"test_long":null,"test_double":null,"test_string":null,"test_timestamp":null,"test_json":null,"test_json_text":null,"test_json_string":null,"test_json_nstring":null}
{"test_boolean":null,"test_long":null,"test_double":null,"test_string":null,"test_timestamp":null,"test_json":12345,"test_json_text":12345,"test_json_string":12345,"test_json_nstring":12345}
{"test_boolean":null,"test_long":null,"test_double":null,"test_string":null,"test_timestamp":null,"test_json":123.45,"test_json_text":123.45,"test_json_string":123.45,"test_json_nstring":123.45}
{"test_boolean":null,"test_long":null,"test_double":null,"test_string":null,"test_timestamp":null,"test_json":"hoge","test_json_text":"hoge","test_json_string":"hoge","test_json_nstring":"hoge"}
2024-03-29 18:56:37.692 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-29 18:56:37.696 +0000 [INFO] (main): Committed.
2024-03-29 18:56:37.696 +0000 [INFO] (main): Next config diff: {"in":{},"out":{}}
