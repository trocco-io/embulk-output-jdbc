in:
  type: file
  path_prefix: test.jsonl
  parser:
    type: jsonl
    columns:
    - {name: test_boolean, type: boolean}
    - {name: test_long, type: long}
    - {name: test_double, type: double}
    - {name: test_string, type: string}
    - {name: test_timestamp, type: timestamp}
    - {name: test_json, type: json}
    - {name: test_json_text, type: json}
    - {name: test_json_string, type: json}
    - {name: test_json_nstring, type: json}
out:
  type: mysql
  mode: replace
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  schema: 
  table: test_table
  column_options:
    test_timestamp: {type: DATETIME}
    test_json_text: {type: TEXT}
    test_json_string: {type: 'TEXT', value_type: string}
    test_json_nstring: {type: 'TEXT', value_type: nstring}
  driver_path: test/mysql-connector-j-8.3.0.jar
  create_table_option: CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
  options: {characterEncoding: utf8}
2024-03-25 03:12:04.428 +0000: Embulk v0.9.26
2024-03-25 03:12:05.028 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-25 03:12:06.307 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-25 03:12:06.757 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-25 03:12:06.833 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-mysql (0.10.5)
2024-03-25 03:12:06.868 +0000 [INFO] (0001:transaction): Loaded plugin embulk-parser-jsonl (0.2.1)
2024-03-25 03:12:06.878 +0000 [INFO] (0001:transaction): Listing local files at directory '.' filtering filename by prefix 'test.jsonl'
2024-03-25 03:12:06.879 +0000 [INFO] (0001:transaction): "follow_symlinks" is set false. Note that symbolic links to directories are skipped.
2024-03-25 03:12:06.881 +0000 [INFO] (0001:transaction): Loading files [test.jsonl]
2024-03-25 03:12:06.901 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-25 03:12:06.920 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:06.927 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.078 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.078 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-j-8.3.0 (Revision: 805f872a57875f311cb82487efcfb070411a3fa0)
2024-03-25 03:12:07.078 +0000 [WARN] (0001:transaction): This plugin will update MySQL Connector/J version in the near future release.
2024-03-25 03:12:07.078 +0000 [WARN] (0001:transaction): It has some incompatibility changes.
2024-03-25 03:12:07.078 +0000 [WARN] (0001:transaction): For example, the 5.1.35 introduced `noTimezoneConversionForDateType` and `cacheDefaultTimezone` options.
2024-03-25 03:12:07.078 +0000 [WARN] (0001:transaction): Please read a document and make sure configuration carefully before updating the plugin.
2024-03-25 03:12:07.088 +0000 [WARN] (0001:transaction): The plugin will set `useLegacyDatetimeCode=false` by default in future.
2024-03-25 03:12:07.088 +0000 [INFO] (0001:transaction): Using replace mode
2024-03-25 03:12:07.145 +0000 [INFO] (0001:transaction): SQL: CREATE TABLE `test_table_0000018e739807e9_embulk` (`test_boolean` BOOLEAN, `test_long` BIGINT, `test_double` DOUBLE PRECISION, `test_string` TEXT, `test_timestamp` DATETIME, `test_json` TEXT, `test_json_text` TEXT, `test_json_string` TEXT, `test_json_nstring` TEXT) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
2024-03-25 03:12:07.165 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-25 03:12:07.347 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-25 03:12:07.358 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.358 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.368 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.426 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.426 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.429 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.429 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.431 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.485 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.485 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.486 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.486 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.488 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.541 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.541 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.542 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.542 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.544 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.597 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.597 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.598 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.598 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.600 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.654 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.654 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.655 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.655 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.657 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.716 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.716 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.717 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.717 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.720 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.774 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.774 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.774 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.774 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.777 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.833 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.833 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e739807e9_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:07.881 +0000 [INFO] (0016:task-0000): Loading 2 rows
2024-03-25 03:12:07.892 +0000 [INFO] (0016:task-0000): > 0.01 seconds (loaded 2 rows in total)
2024-03-25 03:12:07.893 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-25 03:12:07.894 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=2700000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:07.949 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:12:07.950 +0000 [INFO] (0001:transaction): SQL: RENAME TABLE `test_table_0000018e739807e9_embulk` TO `0000018e73980b0e_embulk_swap_tmp`, `test_table` TO `test_table_0000018e739807e9_embulk`, `0000018e73980b0e_embulk_swap_tmp` TO `test_table`
2024-03-25 03:12:07.971 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-25 03:12:07.972 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e739807e9_embulk`
2024-03-25 03:12:07.982 +0000 [INFO] (0001:transaction): > 0.01 seconds
2024-03-25 03:12:07.987 +0000 [WARN] (0001:transaction): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:07.987 +0000 [WARN] (0001:transaction): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:07.989 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:08.041 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:12:08.041 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e739807e9_embulk`
2024-03-25 03:12:08.044 +0000 [INFO] (0001:transaction): > 0.00 seconds
2024-03-25 03:12:08.045 +0000 [INFO] (main): Committed.
2024-03-25 03:12:08.045 +0000 [INFO] (main): Next config diff: {"in":{"last_path":"test.jsonl"},"out":{}}
in:
  type: mysql
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  column_options:
    test_timestamp: {type: string, timestamp_format: '%Y-%m-%d %H:%M:%S.%6N %z'}
    test_json: {type: json}
    test_json_text: {type: json}
    test_json_string: {type: json}
    test_json_nstring: {type: json}
  query: SELECT * FROM `test_table`
  options: {characterEncoding: utf8}
out:
  type: command
  command: 'cat -'
  formatter:
    type: jsonl
2024-03-25 03:12:08.310 +0000: Embulk v0.9.26
2024-03-25 03:12:08.933 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-25 03:12:10.333 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-25 03:12:10.844 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-25 03:12:10.929 +0000 [INFO] (0001:transaction): Loaded plugin embulk-input-mysql (0.13.2)
2024-03-25 03:12:10.958 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-command (0.1.4)
2024-03-25 03:12:10.985 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:10.987 +0000 [INFO] (0001:transaction): The MySQL JDBC driver for the class "com.mysql.jdbc.Driver" is expected to be found in "default_jdbc_driver" at /home/ubuntu/.embulk/lib/gems/gems/embulk-input-mysql-0.13.2-java/default_jdbc_driver/mysql-connector-java-5.1.44.jar.
2024-03-25 03:12:10.991 +0000 [INFO] (0001:transaction): Fetch size is 10000. Using server-side prepared statement.
2024-03-25 03:12:10.992 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-25 03:12:11.177 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )
2024-03-25 03:12:11.177 +0000 [WARN] (0001:transaction): embulk-input-mysql 0.9.0 upgraded the bundled MySQL Connector/J version from 5.1.34 to 5.1.44 .
2024-03-25 03:12:11.177 +0000 [WARN] (0001:transaction): And set useLegacyDatetimeCode=false by default in order to get correct datetime value when the server timezone and the client timezone are different.
2024-03-25 03:12:11.177 +0000 [WARN] (0001:transaction): Set useLegacyDatetimeCode=true if you need to get datetime value same as older embulk-input-mysql.
2024-03-25 03:12:11.210 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-25 03:12:11.272 +0000 [INFO] (0001:transaction): Loaded plugin embulk-formatter-jsonl (0.1.4)
2024-03-25 03:12:11.296 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-25 03:12:11.304 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.314 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.318 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.322 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.325 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.328 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.332 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.335 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:11.346 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:11.346 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:11.367 +0000 [INFO] (0016:task-0000): Fetch size is 10000. Using server-side prepared statement.
2024-03-25 03:12:11.367 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-25 03:12:11.424 +0000 [INFO] (0016:task-0000): SQL: SELECT * FROM `test_table`
2024-03-25 03:12:11.428 +0000 [INFO] (0016:task-0000): > 0.00 seconds
{"test_boolean":true,"test_long":123,"test_double":1.23,"test_string":"あいうえお","test_timestamp":"1999-12-31 23:59:59.000000 +0000","test_json":{"キー":"値"},"test_json_text":{"キー":"値"},"test_json_string":{"キー":"値"},"test_json_nstring":null}
{"test_boolean":false,"test_long":456,"test_double":4.56,"test_string":"かきくけこ","test_timestamp":"2000-01-01 00:00:00.000000 +0000","test_json":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_text":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_string":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_nstring":null}
2024-03-25 03:12:11.476 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-25 03:12:11.480 +0000 [INFO] (main): Committed.
2024-03-25 03:12:11.480 +0000 [INFO] (main): Next config diff: {"in":{},"out":{}}
