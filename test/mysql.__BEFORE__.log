in:
  type: file
  path_prefix: test.jsonl
  parser:
    type: jsonl
    columns:
    - {name: test_boolean, type: boolean}
    - {name: test_long, type: long}
    - {name: test_double, type: double}
    - {name: test_string, type: string}
    - {name: test_timestamp, type: timestamp}
    - {name: test_json, type: json}
    - {name: test_json_text, type: json}
    - {name: test_json_string, type: json}
    - {name: test_json_nstring, type: json}
out:
  type: mysql
  mode: replace
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  schema: 
  table: test_table
  column_options:
    test_timestamp: {type: DATETIME}
    test_json_text: {type: TEXT}
    test_json_string: {type: 'TEXT', value_type: string}
    test_json_nstring: {type: 'TEXT', value_type: nstring}
  driver_path: null
  create_table_option: CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
  options: {characterEncoding: utf8}
2024-03-25 03:11:57.081 +0000: Embulk v0.9.26
2024-03-25 03:11:57.709 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-25 03:11:59.134 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-25 03:11:59.626 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-25 03:11:59.695 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-mysql (0.10.5)
2024-03-25 03:11:59.728 +0000 [INFO] (0001:transaction): Loaded plugin embulk-parser-jsonl (0.2.1)
2024-03-25 03:11:59.737 +0000 [INFO] (0001:transaction): Listing local files at directory '.' filtering filename by prefix 'test.jsonl'
2024-03-25 03:11:59.738 +0000 [INFO] (0001:transaction): "follow_symlinks" is set false. Note that symbolic links to directories are skipped.
2024-03-25 03:11:59.740 +0000 [INFO] (0001:transaction): Loading files [test.jsonl]
2024-03-25 03:11:59.760 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-25 03:11:59.780 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:11:59.783 +0000 [INFO] (0001:transaction): JDBC Driver = /home/ubuntu/.embulk/lib/gems/gems/embulk-output-mysql-0.10.5-java/default_jdbc_driver/mysql-connector-java-5.1.44.jar
2024-03-25 03:11:59.787 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:11:59.931 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:11:59.931 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )
2024-03-25 03:11:59.931 +0000 [WARN] (0001:transaction): This plugin will update MySQL Connector/J version in the near future release.
2024-03-25 03:11:59.931 +0000 [WARN] (0001:transaction): It has some incompatibility changes.
2024-03-25 03:11:59.931 +0000 [WARN] (0001:transaction): For example, the 5.1.35 introduced `noTimezoneConversionForDateType` and `cacheDefaultTimezone` options.
2024-03-25 03:11:59.931 +0000 [WARN] (0001:transaction): Please read a document and make sure configuration carefully before updating the plugin.
2024-03-25 03:11:59.933 +0000 [WARN] (0001:transaction): The plugin will set `useLegacyDatetimeCode=false` by default in future.
2024-03-25 03:11:59.933 +0000 [INFO] (0001:transaction): Using replace mode
2024-03-25 03:11:59.940 +0000 [INFO] (0001:transaction): SQL: CREATE TABLE `test_table_0000018e7397ebc4_embulk` (`test_boolean` BOOLEAN, `test_long` BIGINT, `test_double` DOUBLE PRECISION, `test_string` TEXT, `test_timestamp` DATETIME, `test_json` TEXT, `test_json_text` TEXT, `test_json_string` TEXT, `test_json_nstring` TEXT) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
2024-03-25 03:11:59.960 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-25 03:11:59.993 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-25 03:12:00.005 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.005 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.016 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.313 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.313 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.322 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.322 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.324 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.407 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.407 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.409 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.409 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.412 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.477 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.477 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.479 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.479 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.481 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.538 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.539 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.540 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.540 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.541 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.598 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.598 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.599 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.599 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.600 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.654 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.654 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.655 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.655 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.656 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.713 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.714 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.714 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.714 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.716 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.770 +0000 [INFO] (0016:task-0000): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.770 +0000 [INFO] (0016:task-0000): Prepared SQL: INSERT INTO `test_table_0000018e7397ebc4_embulk` (`test_boolean`, `test_long`, `test_double`, `test_string`, `test_timestamp`, `test_json`, `test_json_text`, `test_json_string`, `test_json_nstring`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-03-25 03:12:00.817 +0000 [INFO] (0016:task-0000): Loading 2 rows
2024-03-25 03:12:00.823 +0000 [INFO] (0016:task-0000): > 0.01 seconds (loaded 2 rows in total)
2024-03-25 03:12:00.825 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-25 03:12:00.825 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=2700000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.883 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.884 +0000 [INFO] (0001:transaction): SQL: RENAME TABLE `test_table_0000018e7397ebc4_embulk` TO `0000018e7397ef74_embulk_swap_tmp`, `test_table` TO `test_table_0000018e7397ebc4_embulk`, `0000018e7397ef74_embulk_swap_tmp` TO `test_table`
2024-03-25 03:12:00.902 +0000 [INFO] (0001:transaction): > 0.02 seconds
2024-03-25 03:12:00.902 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e7397ebc4_embulk`
2024-03-25 03:12:00.910 +0000 [INFO] (0001:transaction): > 0.01 seconds
2024-03-25 03:12:00.916 +0000 [WARN] (0001:transaction): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:00.916 +0000 [WARN] (0001:transaction): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:00.918 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, rewriteBatchedStatements=true, useSSL=false, user=test_user, tcpKeepAlive=true, password=***, connectTimeout=300000}
2024-03-25 03:12:00.974 +0000 [INFO] (0001:transaction): TransactionIsolation=repeatable_read
2024-03-25 03:12:00.975 +0000 [INFO] (0001:transaction): SQL: DROP TABLE IF EXISTS `test_table_0000018e7397ebc4_embulk`
2024-03-25 03:12:00.977 +0000 [INFO] (0001:transaction): > 0.00 seconds
2024-03-25 03:12:00.978 +0000 [INFO] (main): Committed.
2024-03-25 03:12:00.978 +0000 [INFO] (main): Next config diff: {"in":{"last_path":"test.jsonl"},"out":{}}
in:
  type: mysql
  host: test_host
  user: test_user
  password: '***'
  database: test_database
  column_options:
    test_timestamp: {type: string, timestamp_format: '%Y-%m-%d %H:%M:%S.%6N %z'}
    test_json: {type: json}
    test_json_text: {type: json}
    test_json_string: {type: json}
    test_json_nstring: {type: json}
  query: SELECT * FROM `test_table`
  options: {characterEncoding: utf8}
out:
  type: command
  command: 'cat -'
  formatter:
    type: jsonl
2024-03-25 03:12:01.235 +0000: Embulk v0.9.26
2024-03-25 03:12:01.847 +0000 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.
2024-03-25 03:12:03.080 +0000 [INFO] (main): Gem's home and path are set by default: "/home/ubuntu/.embulk/lib/gems"
2024-03-25 03:12:03.562 +0000 [INFO] (main): Started Embulk v0.9.26
2024-03-25 03:12:03.630 +0000 [INFO] (0001:transaction): Loaded plugin embulk-input-mysql (0.13.2)
2024-03-25 03:12:03.657 +0000 [INFO] (0001:transaction): Loaded plugin embulk-output-command (0.1.4)
2024-03-25 03:12:03.684 +0000 [WARN] (0001:transaction): "UTC" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:03.686 +0000 [INFO] (0001:transaction): The MySQL JDBC driver for the class "com.mysql.jdbc.Driver" is expected to be found in "default_jdbc_driver" at /home/ubuntu/.embulk/lib/gems/gems/embulk-input-mysql-0.13.2-java/default_jdbc_driver/mysql-connector-java-5.1.44.jar.
2024-03-25 03:12:03.691 +0000 [INFO] (0001:transaction): Fetch size is 10000. Using server-side prepared statement.
2024-03-25 03:12:03.691 +0000 [INFO] (0001:transaction): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-25 03:12:03.874 +0000 [INFO] (0001:transaction): Using JDBC Driver mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )
2024-03-25 03:12:03.875 +0000 [WARN] (0001:transaction): embulk-input-mysql 0.9.0 upgraded the bundled MySQL Connector/J version from 5.1.34 to 5.1.44 .
2024-03-25 03:12:03.875 +0000 [WARN] (0001:transaction): And set useLegacyDatetimeCode=false by default in order to get correct datetime value when the server timezone and the client timezone are different.
2024-03-25 03:12:03.875 +0000 [WARN] (0001:transaction): Set useLegacyDatetimeCode=true if you need to get datetime value same as older embulk-input-mysql.
2024-03-25 03:12:03.909 +0000 [INFO] (0001:transaction): Using local thread executor with max_threads=16 / output tasks 8 = input tasks 1 * 8
2024-03-25 03:12:03.934 +0000 [INFO] (0001:transaction): Loaded plugin embulk-formatter-jsonl (0.1.4)
2024-03-25 03:12:03.984 +0000 [INFO] (0001:transaction): {done:  0 / 1, running: 0}
2024-03-25 03:12:03.994 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.005 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.009 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.013 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.016 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.020 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.025 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.029 +0000 [INFO] (0016:task-0000): Using command [sh, -c, cat -]
2024-03-25 03:12:04.047 +0000 [WARN] (0016:task-0000): Z is deprecated as a military time zone name. Use UTC instead.
2024-03-25 03:12:04.047 +0000 [WARN] (0016:task-0000): "Z" is recognized as "Z" to be compatible with the legacy style.
2024-03-25 03:12:04.069 +0000 [INFO] (0016:task-0000): Fetch size is 10000. Using server-side prepared statement.
2024-03-25 03:12:04.069 +0000 [INFO] (0016:task-0000): Connecting to jdbc:mysql://test_host:3306/test_database options {characterEncoding=utf8, useCompression=true, socketTimeout=1800000, useSSL=false, user=test_user, useLegacyDatetimeCode=false, tcpKeepAlive=true, useCursorFetch=true, connectTimeout=300000, password=***, zeroDateTimeBehavior=convertToNull}
2024-03-25 03:12:04.128 +0000 [INFO] (0016:task-0000): SQL: SELECT * FROM `test_table`
2024-03-25 03:12:04.133 +0000 [INFO] (0016:task-0000): > 0.00 seconds
{"test_boolean":true,"test_long":123,"test_double":1.23,"test_string":"あいうえお","test_timestamp":"1999-12-31 23:59:59.000000 +0000","test_json":{"キー":"値"},"test_json_text":{"キー":"値"},"test_json_string":{"キー":"値"},"test_json_nstring":null}
{"test_boolean":false,"test_long":456,"test_double":4.56,"test_string":"かきくけこ","test_timestamp":"2000-01-01 00:00:00.000000 +0000","test_json":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_text":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_string":[{"キー1":"値1"},{"キー2":"値2"}],"test_json_nstring":null}
2024-03-25 03:12:04.180 +0000 [INFO] (0001:transaction): {done:  1 / 1, running: 0}
2024-03-25 03:12:04.184 +0000 [INFO] (main): Committed.
2024-03-25 03:12:04.184 +0000 [INFO] (main): Next config diff: {"in":{},"out":{}}
